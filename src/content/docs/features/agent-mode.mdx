---
title: "Agent Mode"
description: "Learn how to use GitHub Copilot's Agent Mode in Visual Studio for autonomous, multi-step coding tasks with self-correction and tool invocation."
order: 4
section: "Features"
---

# Agent Mode

GitHub Copilot Agent Mode is an **autonomous, agentic coding assistant** that performs multi-step coding tasks based on natural language prompts. It represents a significant evolution beyond traditional Copilot interactions—instead of stopping after a single response, agent mode continues running and refining steps until it reaches your goal or requires more input.

> "Agent mode is an evolution of Copilot Edits, with a greater ability to iterate on errors, use tools, and automatically apply code changes."  
> — Microsoft Learn Documentation

## Core Capabilities

### Autonomous Multi-File Editing

Agent mode can work across your entire codebase to accomplish complex tasks:

- **Natural language input** — Describe high-level tasks in plain English
- **Automatic planning** — Creates a plan and executes code edits across multiple files
- **Terminal execution** — Runs build, test, and other commands
- **Tool invocation** — Uses built-in and external tools to extend capabilities
- **Outcome monitoring** — Watches build results, test failures, and tool outputs to iterate as needed

### Self-Correction Loop (Agentic Loop)

One of agent mode's most powerful features is its ability to automatically detect and fix issues:

1. **Error Detection** — Identifies syntax errors, terminal output problems, test failures, and build errors
2. **Auto-Correction** — Determines how to fix detected errors and applies additional edits
3. **Iteration** — The process repeats until all issues are resolved

> "In agent mode, Copilot will iterate on not just its own output, but the result of that output. And it will iterate until it has completed all the subtasks required to complete your prompt."  
> — GitHub Blog

### File Discovery

Agent mode autonomously determines relevant context for your prompt:

**File Access Scope:**
- Local files that are part of the solution
- Local files in the open solution directory or its subdirectories

**Restrictions:**
- Cannot access files excluded through file exclusion settings
- Terminal commands have the same permissions as the running Visual Studio process

## How to Enable Agent Mode

### Prerequisites

- **Visual Studio 2022 version 17.14 or later** is required

### Enable Agent Mode

1. Open **Tools > Options**
2. Navigate to **All Settings > GitHub > Copilot > Copilot Chat** (or the **GitHub > Copilot** section)
3. Select the **Enable Agent mode in the chat pane** checkbox
4. Restart Visual Studio if prompted

### Switch Between Modes

1. Open the Copilot Chat window
2. Click the **Ask** dropdown to expand mode options
3. Select **Agent**

### Troubleshooting

If you don't see the agent mode option:

1. Verify your Visual Studio version is 17.14+ via **Help > About Visual Studio**
2. Confirm agent mode is enabled in **Tools > Options**
3. Restart Visual Studio
4. Check if your organization's admin has disabled the **Editor preview features** flag

## Terminal Command Execution

Agent mode can suggest and execute terminal commands:

- Suggests appropriate commands for your task
- Requests confirmation before executing
- Analyzes runtime errors with self-healing capabilities
- Executes build, test, and lint commands

:::caution
Terminal commands have the same permissions as the running Visual Studio process and aren't limited to solution file restrictions. **Always carefully review proposed terminal commands before allowing execution.**
:::

## Tool Invocation

Agent mode uses various tools to accomplish tasks. You can view and manage available tools by selecting the **Tools** icon in the chat window.

### Built-in Tools

| Tool | Description |
|------|-------------|
| `read_file` | Read file contents |
| `edit_file` | Apply file edits |
| `run_in_terminal` | Execute terminal commands |
| Codebase search | Find relevant code and context |
| Error detection | Read errors from the editor |

### MCP (Model Context Protocol) Tools

MCP tools extend agent mode capabilities with external integrations:

- Require agent mode to be selected (not available in ask mode)
- Configurable through the Tools panel
- Enable connections to databases, APIs, and external services

### Tool Permissions

Use the **Allow** dropdown to configure tool confirmation behavior:

- **Ask every time** — Confirm each tool invocation
- **Allow for this session** — Auto-confirm for current session only
- **Allow for this solution** — Auto-confirm when working in this solution
- **Always allow** — Auto-confirm for all future invocations

Reset tool confirmations at **Tools > Options > All Settings > GitHub > Copilot > Tools**.

## Checkpoint and Edit Review System

As Copilot processes your request, code edits stream directly in the editor and edited files appear in the **Total changes** list.

### Review Options

| Option | Description |
|--------|-------------|
| **Bulk Actions** | Keep or discard all suggested edits at once |
| **Selective Review** | Review individual file diffs and apply selectively |
| **Step-by-Step** | Review specific changes at each step |
| **Cumulative** | Review all changes since last keep/undo action |

### Accepting or Discarding Edits

- Use **Keep** to accept changes and continue
- Use **Undo** to discard changes
- Continue iterating to refine edits or implement additional features

## Planning Feature (Preview)

The Planning feature allows agent mode to generate and execute structured plans for complex tasks.

### Enable Planning

1. Open **Tools > Options**
2. Navigate to **GitHub > Copilot** section
3. Select the **Enable Planning** checkbox
4. Planning tools will appear in the Tools list

### Capabilities

- Generates structured plans with clear steps
- Tracks progress and updates step statuses
- Maintains state through multi-step sessions
- Ideal for large refactors, feature implementations, and cross-cutting concerns

### Limitations

- Plans are stored temporarily and deleted when the session ends
- Slight latency overhead due to structured state tracking

## When to Use Agent Mode

| Scenario | Recommended Mode |
|----------|------------------|
| Multi-step coding tasks | **Agent Mode** |
| Autonomous iteration on errors | **Agent Mode** |
| Using MCP capabilities | **Agent Mode** (required) |
| 100% confidence no edits without explicit approval | Ask Mode |
| Conceptual questions, learning, brainstorming | Ask Mode |
| Code generation without auto-apply | Both work |

## Best Practices

1. **Provide clear requirements** — The more context and specificity you provide, the better results you'll get
2. **Use custom instructions** — Tailor Copilot to your coding preferences, frameworks, and project conventions
3. **Review all code** — Always review agent-generated code, especially terminal commands before execution
4. **Iterate conversationally** — Continue the conversation to refine results rather than starting over
5. **Configure tools thoughtfully** — Select which tools agent mode can use based on your security requirements and workflow needs

## Related Features

| Feature | Description |
|---------|-------------|
| [Chat](/features/chat) | Q&A and code generation without auto-apply |
| [Completions](/features/completions) | Inline code suggestions as you type |
| [MCP Integrations](/integrations/mcp) | Extend agent mode with external tools and services |
